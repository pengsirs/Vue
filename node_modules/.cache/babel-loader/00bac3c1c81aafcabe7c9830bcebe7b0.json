{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nvar hasWindow = typeof window !== 'undefined';\nexport var version = '5.4.0';\nexport var dependencies = {\n  zrender: '5.4.0'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\n\nvar PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n// put at the begining of data processing.\n\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\n\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\n\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */\nfunction (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\n\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar ECharts = /** @class */\nfunction (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n    _this._pendingActions = [];\n    opts = opts || {}; // Get theme by name\n\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      hasWindow ? window : global;\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr; // Expect 60 fps.\n\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter(); // Init mouse events\n\n    _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler; // Lazy update\n\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      } // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determin in the first frame (the\n        // frame is executed immedietely after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      } // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      } // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * @deprecated\n   */\n\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  }; // We don't want developers to use getModel directly.\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || hasWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList(); // Stop animations\n\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        console.warn('There is no specified seires model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        } // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              console.warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      }; // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    }); // Extra events\n    // TODO register?\n\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    }); // Dispose after all views disposed\n\n    chart._zr.dispose(); // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model; // Resize loading effect\n\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent; // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    } // Avoid dispatch action before setOption. Especially in `connect`.\n\n    if (!this._model) {\n      return;\n    } // May dispatchAction in rendering procedure\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh util user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  }; // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By defaut view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView; // This command should not work twice.\n\n        model.__requireNewView = false; // Consider: id same and type changed.\n\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload); // broadcast\n\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      } // If dispatchAction before setOption, do nothing.\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            } // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel); // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the orignal point\n\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // deteming whether use progressive rendering.\n\n        updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not requied in stream mode updater currently.\n\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams); // Set background\n\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        }); // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload); // clear all visual\n\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        }); // Perform visual\n\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false; // Batch action\n\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n        eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      } // Follow the rule of action batch\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatly,\n        // so it should only be triggered when rendering indeed happend\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ; // Allocate zlevels for series and components\n\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeperateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeperateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      }); // TODO progressive?\n\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n        // increamental render (alway render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n        updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n\n        updateStates(seriesModel, chartView);\n      }); // If use hover layer\n\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n      ecIns.getZr().wakeUp();\n    };\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates; // Keep other states.\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      } // Only use states when it's exists.\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\n     * Update chart and blend.\n     */\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DONT mark the element dirty. In case element is incremental and don't wan't to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n        return true;\n      });\n    }\n    ;\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      } // always set z and zlevel if label/labelLine exists\n\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel; // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n      return maxZ2;\n    } // Clear states without animation.\n    // TODO States on component.\n\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        } // TODO If el is incremental.\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          } // Only updated on changed element. In case element is incremental and don't wan't to rerender.\n          // TODO, a more proper way?\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates; // Restore states without animation\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          } // Update state transition and enable animation again.\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          } // The use higlighted and selected flag to toggle states.\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function (ecIns) {\n      return new ( /** @class */\n      function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n    self.off(eventName, wrapped);\n  }\n  ; // @ts-ignore\n\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\n * Map eventType to actionType\n */\n\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\n\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\n\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @deprecated\n */\n\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backword compat\n */\n\nexport var disconnect = disConnect;\n/**\n * Dispose a chart instance\n */\n\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\n\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\n\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  } // Validate action type and event name.\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    } // Check duplicate\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  } // Already registered\n\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\n\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Buitlin global visual\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nexport var dataTool = {};","map":{"version":3,"names":["__extends","zrender","assert","each","isFunction","isObject","indexOf","bind","clone","setAsPrimitive","extend","createHashMap","map","defaults","isDom","isArray","noop","isString","retrieve2","env","timsort","Eventful","GlobalModel","ExtensionAPI","CoordinateSystemManager","OptionManager","backwardCompat","dataStack","SeriesModel","ComponentView","ChartView","graphic","getECData","isHighDownDispatcher","HOVER_STATE_EMPHASIS","HOVER_STATE_BLUR","blurSeriesFromHighlightPayload","toggleSelectionFromPayload","updateSeriesElementSelection","getAllSelectedIndices","isSelectChangePayload","isHighDownPayload","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","savePathStates","enterEmphasis","leaveEmphasis","leaveBlur","enterSelect","leaveSelect","enterBlur","allLeaveBlur","findComponentHighDownDispatchers","blurComponent","handleGlobalMouseOverForHighDown","handleGlobalMouseOutForHighDown","modelUtil","throttle","seriesStyleTask","dataStyleTask","dataColorPaletteTask","loadingDefault","Scheduler","lightTheme","darkTheme","parseClassType","ECEventProcessor","seriesSymbolTask","dataSymbolTask","getVisualFromData","getItemVisualFromData","deprecateLog","deprecateReplaceLog","error","handleLegacySelectEvents","registerExternalTransform","createLocaleObject","SYSTEM_LANG","findEventDispatcher","decal","lifecycle","platformApi","setPlatformAPI","getImpl","hasWindow","window","version","dependencies","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","method","args","_i","arguments","length","isDisposed","disposedWarning","id","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","host","toLowerCase","prototype","apply","MessageCenter","_super","messageCenterProto","on","off","prepare","prepareView","updateDirectly","updateMethods","doConvertPixel","updateStreamModes","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","render","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","ECharts","dom","theme","opts","_this","call","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_pendingActions","themeStorage","_dom","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","process","NODE_ENV","root","global","__ECHARTS__DEFAULT__RENDERER__","__ECHARTS__DEFAULT__COARSE_POINTER","devUseDirtyRect","__ECHARTS__DEFAULT__USE_DIRTY_RECT__","zr","_zr","init","renderer","devicePixelRatio","width","height","ssr","useDirtyRect","useCoarsePointer","pointerSize","_ssr","_throttledZrFlush","flush","_theme","_locale","locale","_coordSysMgr","api","_api","prioritySortFunc","a","b","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","resize","animation","_onframe","_disposed","scheduler","silent","update","updateParams","e","unfinished","remainTime","ecModel","_model","startTime","Date","performSeriesTasks","performDataProcessorTasks","performVisualTasks","getDom","getId","getZr","isSSR","setOption","option","notMerge","lazyUpdate","replaceMerge","transitionOpt","transition","optionManager","optionPreprocessorFuncs","seriesTransition","optionChanged","wakeUp","setTheme","getModel","getOption","getWidth","getHeight","getDevicePixelRatio","painter","dpr","getRenderedCanvas","renderToCanvas","type","Error","backgroundColor","get","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","svgSupported","list","storage","getDisplayList","el","stopAnimation","toDataURL","getDataURL","excludeComponents","excludesComponentViews","self","componentType","eachComponent","mainType","component","view","__viewId","group","ignore","push","url","getType","getConnectedDataURL","isSvg","groupId","mathMin","Math","min","mathMax","max","MAX_NUMBER","Infinity","connectedGroups","left_1","top_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","canvas","getSvgDom","innerHTML","boundingRect","getBoundingClientRect","left","top","right","bottom","targetCanvas","createCanvas","zr_1","content_1","item","x","y","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","add","Rect","shape","style","fill","img","Image","image","convertToPixel","finder","value","convertFromPixel","containPixel","result","findResult","parseFinder","models","key","model","coordSys","coordinateSystem","containPoint","console","warn","getVisual","visualType","parsedFinder","defaultMainType","seriesModel","data","getData","dataIndexInside","hasOwnProperty","indexOfRawIndex","dataIndex","getViewOfComponentModel","componentModel","getViewOfSeriesModel","MOUSE_EVENT_NAMES","eveName","handler","target","params","isGlobalOut","parent","ecData","dataModel","getSeriesByIndex","seriesIndex","getDataParams","dataType","eventData","componentIndex","getComponent","event","_$eventProcessor","eventInfo","targetEl","packedEvent","trigger","zrEventfulCallAtLast","eventActionMap","actionType","eventType","clear","series","dispose","setAttribute","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","resetOption","duration","showLoading","name","cfg","hideLoading","loadingEffects","remove","makeActionFromEvent","eventObj","payload","dispatchAction","opt","actions","browser","weChat","updateLabelLayout","updatedSeries","appendData","internalField","ecIns","restorePipelines","prepareStageTasks","plan","isComponent","viewList","viewMap","i","__alive","doPrepare","eachSeries","requireNewView","__requireNewView","viewId","classType","Clazz","getClass","main","sub","__id","__model","__ecComponentInfo","index","renderTask","splice","subType","setUpdatePayload","concat","callView","query","condition","excludeSeriesId","excludeSeriesIdMap","normalizeToArray","modelId","convertOptionIdName","set","isExcluded","notBlur","_a","focusSelf","dispatchers","dispatcher","prepareAndUpdate","newOption","coordSysMgr","restoreData","create","clearColorPalette","darkMode","setDarkMode","updateTransform","componentDirtyList","componentView","seriesDirtyMap","chartView","uid","setDirty","dirtyMap","updateView","markUpdateMethod","updateVisual","clearAllVisual","updateLayout","methodName","coordSysList","getCoordinateSystems","chartsMap","payloadType","escapeConnect","actionWrap","actionInfo","cptTypeTmp","split","updateMethod","pop","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isHighDown","batchItem","action","preParseFinder","queryOptionMap","mainTypeSpecified","componentMainType","keys","messageCenter","newObj","selected","isFromClick","fromAction","fromActionPayload","pendingActions","shift","isFinished","allocateZlevels","componentZLevels","seriesZLevels","hasSeperateZLevel","zlevel","z","zlevelKey","getZLevelKey","idx","zLevels","lastSeriesZLevel_1","lastSeriesKey_1","setZLevel","dirtyList","clearStates","updateZ","updateStates","getSeries","updatePayload","dirty","perform","getPerformArgs","updateBlend","updateHoverLayerStatus","traverse","isElementRemoved","applyElementStates","newStates","oldStates","currentStates","stateName","states","select","hoverState","emphasis","blur","useStates","elCount","isGroup","node","worker","preventUsingHoverLayer","eachRendered","hoverLayer","blendMode","blend","preventAutoZ","doUpdateZ","maxZ2","label","getTextContent","labelLine","getTextGuideLine","children","childrenRef","z2","isFinite","textGuideLineConfig","showAbove","textContent","textGuide","stateTransition","hasState","prevStates","stateAnimationModel","enableAnimation","isAnimationEnabled","delay","easing","Path","__dirty","class_1","getComponentByElement","modelInfo","highlightDigit","updateConnectedChartsStatus","charts","status","otherChart","action_1","otherCharts_1","echartsProto","one","eventName","cb","ctx","wrapped","args2","idBase","groupIdBase","isClient","existInstance","getInstanceByDom","nodeName","toUpperCase","clientWidth","clientHeight","connect","disConnect","disconnect","getAttribute","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","test","registerCoordinateSystem","coordSysCreator","register","getCoordinateSystemDimensions","getDimensionsInfo","dimensions","slice","registerLocale","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","fn","defaultPriority","isNaN","wrap","__raw","stageHandler","wrapStageHandler","registerLoading","loadingFx","setCanvasCreator","creator","registerMap","mapName","geoJson","specialAreas","getMap","registerTransform","dataTool"],"sources":["/Users/pengsong/Downloads/Web/Vue-Demo/login/node_modules/echarts/lib/core/echarts.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nvar hasWindow = typeof window !== 'undefined';\nexport var version = '5.4.0';\nexport var dependencies = {\n  zrender: '5.4.0'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\n\nvar PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n// put at the begining of data processing.\n\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\n\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\n\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\n\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\n\nvar MessageCenter =\n/** @class */\nfunction (_super) {\n  __extends(MessageCenter, _super);\n\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return MessageCenter;\n}(Eventful);\n\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\n\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\n\nvar ECharts =\n/** @class */\nfunction (_super) {\n  __extends(ECharts, _super);\n\n  function ECharts(dom, // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n    _this._pendingActions = [];\n    opts = opts || {}; // Get theme by name\n\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      var root =\n      /* eslint-disable-next-line */\n      hasWindow ? window : global;\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr; // Expect 60 fps.\n\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter(); // Init mouse events\n\n    _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n    setAsPrimitive(_this);\n    return _this;\n  }\n\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n\n    applyChangedStates(this);\n    var scheduler = this._scheduler; // Lazy update\n\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      } // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n\n\n      this._zr.flush();\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n        // Stream progress.\n        var remainTime = TEST_FRAME_REMAIN_TIME;\n        var ecModel = this._model;\n        var api = this._api;\n        scheduler.unfinished = false;\n\n        do {\n          var startTime = +new Date();\n          scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n          scheduler.performDataProcessorTasks(ecModel);\n          updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n          // each frame is not a good user experience. So we follow the rule that\n          // the extent of the coordinate system is determin in the first frame (the\n          // frame is executed immedietely after task reset.\n          // this._coordSysMgr.update(ecModel, api);\n          // console.log('--- ec frame visual ---', remainTime);\n\n          scheduler.performVisualTasks(ecModel);\n          renderSeries(this, this._model, api, 'remain', {});\n          remainTime -= +new Date() - startTime;\n        } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n        if (!scheduler.unfinished) {\n          this._zr.flush();\n        } // Else, zr flushing be ensue within the same frame,\n        // because zr flushing is after onframe event.\n\n      }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n\n      return;\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      } // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n\n\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * @deprecated\n   */\n\n\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  }; // We don't want developers to use getModel directly.\n\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */\n    || hasWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n\n    return this.renderToCanvas(opts);\n  };\n\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList(); // Stop animations\n\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        console.warn('There is no specified seires model');\n      }\n    }\n\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } // If element has custom eventData of components\n            else if (ecData.eventData) {\n                params = extend({}, ecData.eventData);\n                return true;\n              }\n          }, true);\n        } // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              console.warn('model or view can not be found by params');\n            }\n          }\n\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n\n          _this.trigger(eveName, params);\n        }\n      }; // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n\n\n      handler.zrEventfulCallAtLast = true;\n\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    }); // Extra events\n    // TODO register?\n\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this.setOption({\n      series: []\n    }, true);\n  };\n\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._disposed = true;\n    var dom = this.getDom();\n\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    }); // Dispose after all views disposed\n\n    chart._zr.dispose(); // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n\n\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n\n      return;\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._zr.resize(opts);\n\n    var ecModel = this._model; // Resize loading effect\n\n    this._loadingFX && this._loadingFX.resize();\n\n    if (!ecModel) {\n      return;\n    }\n\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent; // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n\n    name = name || 'default';\n    this.hideLoading();\n\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Loading effects ' + name + ' not exists.');\n      }\n\n      return;\n    }\n\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n\n    if (!actions[payload.type]) {\n      return;\n    } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n    if (!this._model) {\n      return;\n    } // May dispatchAction in rendering procedure\n\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n\n      return;\n    }\n\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh util user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n\n    seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  }; // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n\n\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n\n\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n\n      function doPrepare(model) {\n        // By defaut view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView; // This command should not work twice.\n\n        model.__requireNewView = false; // Consider: id same and type changed.\n\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload); // broadcast\n\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      } // If dispatchAction before setOption, do nothing.\n\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n        if (isExcluded) {\n          return;\n        }\n\n        ;\n\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n                focusSelf = _a.focusSelf,\n                dispatchers = _a.dispatchers;\n\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            } // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n\n\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n        if (isExcluded) {\n          return;\n        }\n\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel); // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the orignal point\n\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // deteming whether use progressive rendering.\n\n        updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not requied in stream mode updater currently.\n\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams); // Set background\n\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n        var api = this._api; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n\n          var componentView = _this.getViewOfComponentModel(componentModel);\n\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        }); // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload); // clear all visual\n\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        }); // Perform visual\n\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n\n      var ecModel = ecIns._model;\n\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false; // Batch action\n\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n        eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n              queryOptionMap = _a.queryOptionMap,\n              mainTypeSpecified = _a.mainTypeSpecified;\n\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      } // Follow the rule of action batch\n\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n\n\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatly,\n        // so it should only be triggered when rendering indeed happend\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n\n        if ( // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n\n    ; // Allocate zlevels for series and components\n\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeperateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n\n      if (hasSeperateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n\n            lastSeriesKey_1 = '';\n          }\n\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n\n\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      }); // TODO progressive?\n\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n        clearStates(seriesModel, chartView);\n\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n\n        chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n        // increamental render (alway render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n        updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n\n        updateStates(seriesModel, chartView);\n      }); // If use hover layer\n\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n      ecIns.getZr().wakeUp();\n    };\n\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates; // Keep other states.\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      } // Only use states when it's exists.\n\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n\n      el.useStates(newStates);\n    }\n\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    ;\n    /**\n     * Update chart and blend.\n     */\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DONT mark the element dirty. In case element is incremental and don't wan't to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n\n    ;\n\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n        return true;\n      });\n    }\n\n    ;\n\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      } // always set z and zlevel if label/labelLine exists\n\n\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel; // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n\n      return maxZ2;\n    } // Clear states without animation.\n    // TODO States on component.\n\n\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        } // TODO If el is incremental.\n\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          } // Only updated on changed element. In case element is incremental and don't wan't to rerender.\n          // TODO, a more proper way?\n\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates; // Restore states without animation\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          } // Update state transition and enable animation again.\n\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          } // The use higlighted and selected flag to toggle states.\n\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n\n    ;\n\n    createExtensionAPI = function (ecIns) {\n      return new (\n      /** @class */\n      function (_super) {\n        __extends(class_1, _super);\n\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n\n            el = el.parent;\n          }\n        };\n\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n\n  return ECharts;\n}(Eventful);\n\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n\n  function wrapped() {\n    var args2 = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n\n    cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n    self.off(eventName, wrapped);\n  }\n\n  ; // @ts-ignore\n\n  this.on.call(this, eventName, wrapped, ctx);\n};\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('Instance ' + id + ' has been disposed');\n  }\n}\n\nvar actions = {};\n/**\n * Map eventType to actionType\n */\n\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\n\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n\n    var existInstance = getInstanceByDom(dom);\n\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('There is a chart instance already initialized on the dom.');\n      }\n\n      return existInstance;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\n\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @deprecated\n */\n\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backword compat\n */\n\nexport var disconnect = disConnect;\n/**\n * Dispose a chart instance\n */\n\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\n\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\n\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  } // Validate action type and event name.\n\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    } // Check duplicate\n\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  } // Already registered\n\n\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\n\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\n\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Buitlin global visual\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nexport var dataTool = {};"],"mappings":"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"},"metadata":{},"sourceType":"module"}